{"ast":null,"code":"import _asyncToGenerator from \"D:/Laragon/www/Osem-Salmon-PRS/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"regenerator-runtime/runtime.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport { getDownloadURL, uploadBytes } from 'firebase/storage';\nimport { ref } from 'vue';\nimport { projectStorage } from \"../firebase/config\";\nimport getUserAuth from './getUserAuth';\n\nvar _getUserAuth = getUserAuth(),\n    userAuth = _getUserAuth.userAuth;\n\nvar useStorage = function useStorage() {\n  var error = ref(null);\n  var url = ref(null);\n  var filePath = ref(null);\n\n  var uploadImage = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(file) {\n      var storageRef, uploadTask;\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              filePath.value = \"covers/\".concat(userAuth.value.uid, \"/\").concat(file.name); //create storage ref\n              //const storageRef = projectStorage.ref(filePath.value)\n\n              storageRef = ref(projectStorage, filePath.value); //const uploadTask = uploadBytes(storageRef, file)\n\n              try {\n                //const res = await storageRef.put(file)\n                uploadTask = uploadBytes(storageRef, file); //url.value = await res.ref.getDownloadURL()\n\n                getDownloadURL(storageRef).then(function (url) {\n                  console.log('Download URL', url);\n                });\n              } catch (err) {\n                console.log(\"Error in uploading\"); //error.value = err.message\n              }\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function uploadImage(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return {\n    error: error,\n    url: url,\n    filePath: filePath,\n    uploadImage: uploadImage\n  };\n};\n\nexport default useStorage;","map":{"version":3,"names":["getDownloadURL","uploadBytes","ref","projectStorage","getUserAuth","userAuth","useStorage","error","url","filePath","uploadImage","file","value","uid","name","storageRef","uploadTask","then","console","log","err"],"sources":["D:/Laragon/www/Osem-Salmon-PRS/src/composables/useStorage.js"],"sourcesContent":["import { getDownloadURL, uploadBytes } from 'firebase/storage'\r\nimport { ref } from 'vue'\r\nimport { projectStorage } from \"../firebase/config\"\r\nimport getUserAuth from './getUserAuth'\r\n\r\nconst { userAuth } = getUserAuth()\r\nconst useStorage = () => {\r\n    const error = ref(null)\r\n    const url = ref(null)\r\n    const filePath = ref(null)\r\n\r\n    const uploadImage = async (file) => {\r\n        filePath.value = `covers/${userAuth.value.uid}/${file.name}`\r\n\r\n        //create storage ref\r\n        //const storageRef = projectStorage.ref(filePath.value)\r\n        const storageRef = ref(projectStorage, filePath.value)\r\n        //const uploadTask = uploadBytes(storageRef, file)\r\n\r\n        try {\r\n            //const res = await storageRef.put(file)\r\n            const uploadTask = uploadBytes(storageRef, file)\r\n        \r\n            //url.value = await res.ref.getDownloadURL()\r\n            getDownloadURL(storageRef).then(url => {\r\n                console.log('Download URL', url)\r\n            })\r\n        } catch (err) {\r\n            console.log(\"Error in uploading\")\r\n            //error.value = err.message\r\n        }\r\n    }\r\n\r\n    return {\r\n        error, url, filePath, uploadImage\r\n    }\r\n}\r\n\r\nexport default useStorage"],"mappings":";;;;AAAA,SAASA,cAAT,EAAyBC,WAAzB,QAA4C,kBAA5C;AACA,SAASC,GAAT,QAAoB,KAApB;AACA,SAASC,cAAT,QAA+B,oBAA/B;AACA,OAAOC,WAAP,MAAwB,eAAxB;;AAEA,mBAAqBA,WAAW,EAAhC;AAAA,IAAQC,QAAR,gBAAQA,QAAR;;AACA,IAAMC,UAAU,GAAG,SAAbA,UAAa,GAAM;EACrB,IAAMC,KAAK,GAAGL,GAAG,CAAC,IAAD,CAAjB;EACA,IAAMM,GAAG,GAAGN,GAAG,CAAC,IAAD,CAAf;EACA,IAAMO,QAAQ,GAAGP,GAAG,CAAC,IAAD,CAApB;;EAEA,IAAMQ,WAAW;IAAA,mEAAG,iBAAOC,IAAP;MAAA;MAAA;QAAA;UAAA;YAAA;cAChBF,QAAQ,CAACG,KAAT,oBAA2BP,QAAQ,CAACO,KAAT,CAAeC,GAA1C,cAAiDF,IAAI,CAACG,IAAtD,EADgB,CAGhB;cACA;;cACMC,UALU,GAKGb,GAAG,CAACC,cAAD,EAAiBM,QAAQ,CAACG,KAA1B,CALN,EAMhB;;cAEA,IAAI;gBACA;gBACMI,UAFN,GAEmBf,WAAW,CAACc,UAAD,EAAaJ,IAAb,CAF9B,EAIA;;gBACAX,cAAc,CAACe,UAAD,CAAd,CAA2BE,IAA3B,CAAgC,UAAAT,GAAG,EAAI;kBACnCU,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BX,GAA5B;gBACH,CAFD;cAGH,CARD,CAQE,OAAOY,GAAP,EAAY;gBACVF,OAAO,CAACC,GAAR,CAAY,oBAAZ,EADU,CAEV;cACH;;YAnBe;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAAH;;IAAA,gBAAXT,WAAW;MAAA;IAAA;EAAA,GAAjB;;EAsBA,OAAO;IACHH,KAAK,EAALA,KADG;IACIC,GAAG,EAAHA,GADJ;IACSC,QAAQ,EAARA,QADT;IACmBC,WAAW,EAAXA;EADnB,CAAP;AAGH,CA9BD;;AAgCA,eAAeJ,UAAf"},"metadata":{},"sourceType":"module"}