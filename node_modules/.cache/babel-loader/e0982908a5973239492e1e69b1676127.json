{"ast":null,"code":"import _asyncToGenerator from \"D:/Laragon/www/osemsalmonv3/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"regenerator-runtime/runtime.js\";\nimport { ref } from 'vue';\nimport { db } from '../firebase/config';\nimport { addDoc, collection } from 'firebase/firestore';\nimport { useRouter } from 'vue-router';\nimport useSignup from '../composables/useSignup';\nexport default {\n  setup: function setup() {\n    var fullname = ref('');\n    var email = ref('');\n    var password = ref('');\n\n    var _useSignup = useSignup(),\n        signup = _useSignup.signup,\n        error = _useSignup.error;\n\n    var router = useRouter();\n\n    var handleSignupAuth = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return signup(email.value, password.value);\n\n              case 2:\n                if (!error.value) {\n                  router.push('/');\n                }\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function handleSignupAuth() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    var handleSubmit = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var colRef;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                colRef = collection(db, 'user');\n                _context2.next = 3;\n                return addDoc(colRef, {\n                  fullname: fullname.value,\n                  email: email.value,\n                  isadmin: false\n                });\n\n              case 3:\n                fullname.value = '';\n                email.value = '';\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function handleSubmit() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    return {\n      handleSubmit: handleSubmit,\n      fullname: fullname,\n      email: email,\n      handleSignupAuth: handleSignupAuth,\n      password: password,\n      error: error\n    };\n  }\n};","map":{"version":3,"sources":["D:\\Laragon\\www\\osemsalmonv3\\src\\components\\CreateUserForm.vue"],"names":[],"mappings":";;AAqBA,SAAQ,GAAR,QAAkB,KAAlB;AACA,SAAQ,EAAR,QAAiB,oBAAjB;AACA,SAAQ,MAAR,EAAgB,UAAhB,QAAiC,oBAAjC;AACA,SAAS,SAAT,QAA0B,YAA1B;AAEA,OAAO,SAAP,MAAsB,0BAAtB;AAEA,eAAe;EACb,KADa,mBACJ;IACP,IAAM,QAAO,GAAI,GAAG,CAAC,EAAD,CAApB;IACA,IAAM,KAAI,GAAI,GAAG,CAAC,EAAD,CAAjB;IACA,IAAM,QAAO,GAAI,GAAG,CAAC,EAAD,CAApB;;IAEA,iBAA0B,SAAS,EAAnC;IAAA,IAAQ,MAAR,cAAQ,MAAR;IAAA,IAAgB,KAAhB,cAAgB,KAAhB;;IACA,IAAM,MAAK,GAAI,SAAS,EAAxB;;IAEA,IAAM,gBAAe;MAAA,mEAAI;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACjB,MAAM,CAAC,KAAK,CAAC,KAAP,EAAc,QAAQ,CAAC,KAAvB,CADW;;cAAA;gBAGvB,IAAI,CAAC,KAAK,CAAC,KAAX,EAAkB;kBAChB,MAAM,CAAC,IAAP,CAAY,GAAZ;gBACF;;cALuB;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CAAJ;;MAAA,gBAAf,gBAAe;QAAA;MAAA;IAAA,GAArB;;IAQA,IAAM,YAAW;MAAA,oEAAI;QAAA;QAAA;UAAA;YAAA;cAAA;gBACb,MADa,GACJ,UAAU,CAAC,EAAD,EAAK,MAAL,CADN;gBAAA;gBAAA,OAGb,MAAM,CAAC,MAAD,EAAS;kBACnB,QAAQ,EAAE,QAAQ,CAAC,KADA;kBAEnB,KAAK,EAAE,KAAK,CAAC,KAFM;kBAGnB,OAAO,EAAE;gBAHU,CAAT,CAHO;;cAAA;gBASnB,QAAQ,CAAC,KAAT,GAAiB,EAAjB;gBACA,KAAK,CAAC,KAAN,GAAc,EAAd;;cAVmB;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CAAJ;;MAAA,gBAAX,YAAW;QAAA;MAAA;IAAA,GAAjB;;IAaA,OAAO;MAAC,YAAY,EAAZ,YAAD;MAAe,QAAQ,EAAR,QAAf;MAAyB,KAAK,EAAL,KAAzB;MAAgC,gBAAgB,EAAhB,gBAAhC;MAAkD,QAAQ,EAAR,QAAlD;MAA4D,KAAK,EAAL;IAA5D,CAAP;EACF;AA/Ba,CAAf","sourcesContent":["<template>\n  <form @submit.prevent=\"handleSubmit\">\n    <h3>Add a New User</h3>\n\n    <label for=\"title\">Full Name:</label>\n    <input type=\"text\" name=\"fullname\" v-model=\"fullname\" required>\n\n    <label for=\"email\">Email:</label>\n    <input type=\"text\" name=\"email\" v-model=\"email\" required>\n\n    <label for=\"password\">Password:</label>\n    <input type=\"password\" name=\"password\" v-model=\"password\" required>\n\n    <button>Add User</button>\n    <div v-if=\"error\">\n      {{ error }}\n    </div>\n  </form>\n</template>\n\n<script>\nimport {ref} from 'vue'\nimport {db} from '../firebase/config'\nimport {addDoc, collection} from 'firebase/firestore'\nimport { useRouter } from 'vue-router'\n\nimport useSignup from '../composables/useSignup'\n\nexport default {\n  setup () {\n    const fullname = ref('')\n    const email = ref('')\n    const password = ref('')\n\n    const { signup, error } = useSignup()\n    const router = useRouter()\n\n    const handleSignupAuth = async () => {\n      await signup(email.value, password.value)\n    \n      if (!error.value) {\n        router.push('/')\n      }\n    }\n\n    const handleSubmit = async () => {\n      const colRef = collection(db, 'user')\n\n      await addDoc(colRef, {\n        fullname: fullname.value,\n        email: email.value,\n        isadmin: false\n      })\n\n      fullname.value = ''\n      email.value = ''\n    }\n\n    return {handleSubmit, fullname, email, handleSignupAuth, password, error}\n  }\n\n}\n</script>\n\n<style>\nform {\n  padding: 10px;\n  margin-top: 10px;\n  border: 1px dashed #c3c8ce;\n}\n</style>"],"sourceRoot":""},"metadata":{},"sourceType":"module"}