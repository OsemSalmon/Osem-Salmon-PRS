{"ast":null,"code":"import _objectSpread from \"D:/Laragon/www/osemsalmonv3/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport { ref, watchEffect } from 'vue';\nimport { db } from '../firebase/config';\nimport { collection, onSnapshot } from 'firebase/firestore';\n\nvar getCollection = function getCollection(c) {\n  var documents = ref(null);\n  var colRef = collection(db, c);\n  var unsub = onSnapshot(colRef, function (snapshot) {\n    var results = [];\n    snapshot.docs.forEach(function (doc) {\n      results.push(_objectSpread(_objectSpread({}, doc.data()), {}, {\n        id: doc.id\n      }));\n    }); //update value\n\n    documents.value = results;\n  });\n  watchEffect(function (onInvalidate) {\n    onInvalidate(function () {\n      return unsub();\n    });\n  });\n  return {\n    documents: documents\n  };\n};\n\nexport default getCollection;","map":{"version":3,"names":["ref","watchEffect","db","collection","onSnapshot","getCollection","c","documents","colRef","unsub","snapshot","results","docs","forEach","doc","push","data","id","value","onInvalidate"],"sources":["D:/Laragon/www/osemsalmonv3/src/composables/getCollection.js"],"sourcesContent":["import { ref, watchEffect } from 'vue'\r\n\r\nimport { db } from '../firebase/config'\r\nimport { collection, onSnapshot } from 'firebase/firestore'\r\n\r\nconst getCollection = (c) => {\r\n    const documents = ref(null)\r\n\r\n    let colRef = collection(db, c)\r\n\r\n    const unsub = onSnapshot(colRef, snapshot => {\r\n        let results = []\r\n        snapshot.docs.forEach(doc => {\r\n            results.push({ ...doc.data(), id: doc.id })\r\n        })\r\n\r\n        //update value\r\n        documents.value = results\r\n    })\r\n\r\n    watchEffect((onInvalidate) => {\r\n        onInvalidate(() => unsub())\r\n    })\r\n\r\n    return { documents }\r\n}\r\n\r\nexport default getCollection"],"mappings":";;;AAAA,SAASA,GAAT,EAAcC,WAAd,QAAiC,KAAjC;AAEA,SAASC,EAAT,QAAmB,oBAAnB;AACA,SAASC,UAAT,EAAqBC,UAArB,QAAuC,oBAAvC;;AAEA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACC,CAAD,EAAO;EACzB,IAAMC,SAAS,GAAGP,GAAG,CAAC,IAAD,CAArB;EAEA,IAAIQ,MAAM,GAAGL,UAAU,CAACD,EAAD,EAAKI,CAAL,CAAvB;EAEA,IAAMG,KAAK,GAAGL,UAAU,CAACI,MAAD,EAAS,UAAAE,QAAQ,EAAI;IACzC,IAAIC,OAAO,GAAG,EAAd;IACAD,QAAQ,CAACE,IAAT,CAAcC,OAAd,CAAsB,UAAAC,GAAG,EAAI;MACzBH,OAAO,CAACI,IAAR,iCAAkBD,GAAG,CAACE,IAAJ,EAAlB;QAA8BC,EAAE,EAAEH,GAAG,CAACG;MAAtC;IACH,CAFD,EAFyC,CAMzC;;IACAV,SAAS,CAACW,KAAV,GAAkBP,OAAlB;EACH,CARuB,CAAxB;EAUAV,WAAW,CAAC,UAACkB,YAAD,EAAkB;IAC1BA,YAAY,CAAC;MAAA,OAAMV,KAAK,EAAX;IAAA,CAAD,CAAZ;EACH,CAFU,CAAX;EAIA,OAAO;IAAEF,SAAS,EAATA;EAAF,CAAP;AACH,CApBD;;AAsBA,eAAeF,aAAf"},"metadata":{},"sourceType":"module"}