{"ast":null,"code":"import _asyncToGenerator from \"D:/Laragon/www/Osem-Salmon-PRS/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"regenerator-runtime/runtime.js\";\nimport { createStore } from 'vuex';\nimport router from '../router';\nimport { auth } from '../firebase';\nimport { createUserWithEmailAndPassword } from 'firebase/auth';\nimport { signInWithEmailAndPassword } from 'firebase/auth';\nimport { signOut } from 'firebase/auth';\nexport default createStore({\n  state: {\n    user: null\n  },\n  mutations: {\n    SET_USER: function SET_USER(state, user) {\n      state.user = user;\n    },\n    CLEAR_USER: function CLEAR_USER(state) {\n      state.user = null;\n    }\n  },\n  actions: {\n    login: function login(_ref, details) {\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var commit, email, password;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                commit = _ref.commit;\n                email = details.email, password = details.password;\n                _context.prev = 2;\n                _context.next = 5;\n                return signInWithEmailAndPassword(auth, email, password);\n\n              case 5:\n                _context.next = 18;\n                break;\n\n              case 7:\n                _context.prev = 7;\n                _context.t0 = _context[\"catch\"](2);\n                _context.t1 = _context.t0.code;\n                _context.next = _context.t1 === 'auth/user-not-found' ? 12 : _context.t1 === 'auth/wrong-password' ? 14 : 16;\n                break;\n\n              case 12:\n                alert(\"User not found\");\n                return _context.abrupt(\"break\", 17);\n\n              case 14:\n                alert(\"Wrong password\");\n                return _context.abrupt(\"break\", 17);\n\n              case 16:\n                alert(\"Something went wrong\");\n\n              case 17:\n                return _context.abrupt(\"return\");\n\n              case 18:\n                commit('SET_USER', auth.currentUser);\n                router.push('/');\n\n              case 20:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[2, 7]]);\n      }))();\n    },\n    register: function register(_ref2, details) {\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var commit, email, password;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                commit = _ref2.commit;\n                email = details.email, password = details.password;\n                _context2.prev = 2;\n                _context2.next = 5;\n                return createUserWithEmailAndPassword(auth, email, password);\n\n              case 5:\n                _context2.next = 22;\n                break;\n\n              case 7:\n                _context2.prev = 7;\n                _context2.t0 = _context2[\"catch\"](2);\n                _context2.t1 = _context2.t0.code;\n                _context2.next = _context2.t1 === 'auth/email-already-in-use' ? 12 : _context2.t1 === 'auth/invalid-email' ? 14 : _context2.t1 === 'auth/operation-not-allowed' ? 16 : _context2.t1 === 'auth/weak-password' ? 18 : 20;\n                break;\n\n              case 12:\n                alert(\"Email already in use\");\n                return _context2.abrupt(\"break\", 21);\n\n              case 14:\n                alert(\"Invalid email\");\n                return _context2.abrupt(\"break\", 21);\n\n              case 16:\n                alert(\"Operation not allowed\");\n                return _context2.abrupt(\"break\", 21);\n\n              case 18:\n                alert(\"Weak password\");\n                return _context2.abrupt(\"break\", 21);\n\n              case 20:\n                alert(\"Something went wrong\");\n\n              case 21:\n                return _context2.abrupt(\"return\");\n\n              case 22:\n                //commit('SET_USER', auth.currentUser)\n                router.push('/login');\n\n              case 23:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[2, 7]]);\n      }))();\n    },\n    logout: function logout(_ref3) {\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n        var commit;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                commit = _ref3.commit;\n                _context3.next = 3;\n                return signOut(auth);\n\n              case 3:\n                commit('CLEAR_USER');\n                router.push('/login');\n\n              case 5:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }))();\n    },\n    fetchUser: function fetchUser(_ref4) {\n      var commit = _ref4.commit;\n      auth.onAuthStateChanged( /*#__PURE__*/function () {\n        var _ref5 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(user) {\n          return regeneratorRuntime.wrap(function _callee4$(_context4) {\n            while (1) {\n              switch (_context4.prev = _context4.next) {\n                case 0:\n                  if (user === null) {\n                    commit('CLEAR_USER');\n                  } else {\n                    commit('SET_USER ', user);\n\n                    if (router.isReady() && router.currentRoute.value.path === '/login') {\n                      router.push('/');\n                    }\n                  }\n\n                case 1:\n                case \"end\":\n                  return _context4.stop();\n              }\n            }\n          }, _callee4);\n        }));\n\n        return function (_x) {\n          return _ref5.apply(this, arguments);\n        };\n      }());\n    }\n  }\n});","map":{"version":3,"names":["createStore","router","auth","createUserWithEmailAndPassword","signInWithEmailAndPassword","signOut","state","user","mutations","SET_USER","CLEAR_USER","actions","login","details","commit","email","password","code","alert","currentUser","push","register","logout","fetchUser","onAuthStateChanged","isReady","currentRoute","value","path"],"sources":["D:/Laragon/www/Osem-Salmon-PRS/src/store/index.js"],"sourcesContent":["import { createStore } from 'vuex'\r\nimport router from '../router'\r\nimport { auth } from '../firebase'\r\nimport { createUserWithEmailAndPassword } from 'firebase/auth'\r\nimport { signInWithEmailAndPassword } from 'firebase/auth'\r\nimport { signOut } from 'firebase/auth'\r\n\r\nexport default createStore({\r\n  state: {\r\n    user: null\r\n  },\r\n\r\n  mutations: {\r\n    SET_USER (state, user) {\r\n      state.user = user\r\n    },\r\n\r\n    CLEAR_USER (state) {\r\n      state.user = null\r\n    }\r\n  },\r\n\r\n  \r\n  actions: {\r\n    async login ({commit}, details) {\r\n      const { email, password } = details\r\n\r\n      try{\r\n        await signInWithEmailAndPassword(auth, email, password)\r\n      } catch (error) {\r\n        switch(error.code) {\r\n          case 'auth/user-not-found':\r\n            alert (\"User not found\")\r\n            break\r\n\r\n          case 'auth/wrong-password':\r\n            alert(\"Wrong password\")\r\n            break\r\n\r\n          default:\r\n            alert(\"Something went wrong\")\r\n        }\r\n\r\n        return\r\n      }\r\n\r\n      commit('SET_USER', auth.currentUser)\r\n      router.push('/')\r\n    },\r\n\r\n    async register ({commit}, details) {\r\n      const { email, password } = details\r\n\r\n      try{\r\n        await createUserWithEmailAndPassword(auth, email, password)\r\n      } catch (error) {\r\n        switch(error.code) {\r\n          case 'auth/email-already-in-use':\r\n            alert(\"Email already in use\")\r\n            break\r\n\r\n          case 'auth/invalid-email':\r\n            alert(\"Invalid email\")\r\n            break\r\n\r\n          case 'auth/operation-not-allowed':\r\n            alert(\"Operation not allowed\")\r\n            break\r\n\r\n          case 'auth/weak-password':\r\n            alert(\"Weak password\")\r\n            break\r\n\r\n          default:\r\n            alert(\"Something went wrong\")\r\n        }\r\n\r\n        return\r\n      }\r\n\r\n      //commit('SET_USER', auth.currentUser)\r\n      router.push('/login')\r\n    },\r\n\r\n    async logout ({commit}) {\r\n      await signOut(auth)\r\n\r\n      commit('CLEAR_USER')\r\n\r\n      router.push('/login')\r\n    },\r\n\r\n    fetchUser ({commit}) {\r\n        auth.onAuthStateChanged(async user => {\r\n          if (user === null) {\r\n            commit('CLEAR_USER')\r\n          } else {\r\n            commit('SET_USER ', user)\r\n\r\n            if (router.isReady() && router.currentRoute.value.path === '/login') {\r\n              router.push('/')\r\n            }\r\n          }\r\n        })\r\n    }\r\n  }\r\n})\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}