{"ast":null,"code":"import { db } from \"../firebase/config\";\nimport { doc, updateDoc } from \"firebase/firestore\";\nimport getCollection from \"../composables/getCollection\";\nimport getUserAuth from \"../composables/getUserAuth\";\nimport editUserPassword from \"../components/editUserPassword.vue\";\nexport default {\n  setup: function setup() {\n    var _getUserAuth = getUserAuth(),\n        userAuth = _getUserAuth.userAuth;\n\n    var _getCollection = getCollection(\"staff\", [\"uid\", \"==\", userAuth.value.uid]),\n        staff = _getCollection.documents;\n\n    var handleUpdate = function handleUpdate(staff) {\n      var docRef = doc(db, \"staff\", staff.id);\n      updateDoc(docRef, {\n        fullname: staff.fullname,\n        pNumber: staff.pNumber\n      });\n      alert(\"Profile updated\");\n    };\n\n    return {\n      staff: staff,\n      userAuth: userAuth,\n      handleUpdate: handleUpdate\n    };\n  },\n  components: {\n    editUserPassword: editUserPassword\n  }\n};","map":{"version":3,"sources":["D:\\Laragon\\www\\Osem-Salmon-PRS\\src\\views\\userProfile.vue"],"names":[],"mappings":"AA0EA,SAAS,EAAT,QAAmB,oBAAnB;AACA,SAAS,GAAT,EAAc,SAAd,QAA+B,oBAA/B;AAEA,OAAO,aAAP,MAA0B,8BAA1B;AACA,OAAO,WAAP,MAAwB,4BAAxB;AACA,OAAO,gBAAP,MAA6B,oCAA7B;AAEA,eAAe;EACX,KADW,mBACH;IACJ,mBAAqB,WAAW,EAAhC;IAAA,IAAQ,QAAR,gBAAQ,QAAR;;IACA,qBAA6B,aAAa,CAAC,OAAD,EAAU,CAAC,KAAD,EAAQ,IAAR,EAAc,QAAQ,CAAC,KAAT,CAAe,GAA7B,CAAV,CAA1C;IAAA,IAAmB,KAAnB,kBAAQ,SAAR;;IACA,IAAM,YAAW,GAAI,SAAf,YAAe,CAAC,KAAD,EAAW;MAC5B,IAAM,MAAK,GAAI,GAAG,CAAC,EAAD,EAAK,OAAL,EAAc,KAAK,CAAC,EAApB,CAAlB;MACA,SAAS,CAAC,MAAD,EAAS;QACd,QAAQ,EAAE,KAAK,CAAC,QADF;QAEd,OAAO,EAAE,KAAK,CAAC;MAFD,CAAT,CAAT;MAIA,KAAK,CAAC,iBAAD,CAAL;IACJ,CAPA;;IAQA,OAAO;MACH,KAAK,EAAL,KADG;MAEH,QAAQ,EAAR,QAFG;MAGH,YAAW,EAAX;IAHG,CAAP;EAKH,CAjBU;EAkBX,UAAU,EAAE;IAAE,gBAAe,EAAf;EAAF;AAlBD,CAAf","sourcesContent":["<template>\r\n  <div class=\"container\" v-for=\"staff in staff\" :key=\"staff.id\">\r\n    <div class=\"row\">\r\n      <div class=\"col\">\r\n        <h1 class=\"display-6\">Profile</h1>\r\n      </div>\r\n      <div class=\"col\"></div>\r\n      <div class=\"col\"></div>\r\n    </div>\r\n    <hr />\r\n    <div class=\"row\">\r\n      <div class=\"col-3\">\r\n        <img src=\"https://via.placeholder.com/150\" class=\"img-fluid\" alt=\"\">\r\n      </div>\r\n      <div class=\"col\">\r\n        \r\n            <div class=\"mb-3\">\r\n                <label class=\"form-label\">User ID</label>\r\n                <input type=\"text\" class=\"form-control\" v-model=\"staff.uid\" disabled>\r\n            </div>\r\n\r\n            <div class=\"mb-3\">\r\n                <label class=\"form-label\">Email</label>\r\n                <input type=\"text\" class=\"form-control\" v-model=\"staff.email\" disabled>\r\n                <div class=\"form-text\">You are not allowed to change these values.</div>\r\n            </div>\r\n        <hr/>\r\n        <form @submit.prevent=\"handleUpdate(staff)\">\r\n            <div class=\"mb-3\">\r\n                <label class=\"form-label\">Name</label>\r\n                <input type=\"text\" class=\"form-control\" v-model=\"staff.fullname\">\r\n            </div>\r\n\r\n            <div class=\"mb-3\">\r\n                <label class=\"form-label\">Contact Number</label>\r\n                <input type=\"text\" class=\"form-control\" v-model=\"staff.pNumber\">\r\n            </div>\r\n\r\n            <div class=\"mb-3\">\r\n                <label class=\"form-label\">Address</label>\r\n                <input type=\"text\" class=\"form-control\" v-model=\"staff.address\">\r\n            </div>\r\n\r\n            <div class=\"mb-3 float-end\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-toggle=\"modal\" data-bs-target=\"#staticBackdrop2\">\r\n                Change Password\r\n                </button>\r\n                <button class=\"btn btn-primary ms-1\">Update</button>\r\n            </div>\r\n        </form>\r\n      </div>\r\n      <div class=\"col-3\">\r\n        <div class=\"mb-3\">\r\n            <div class=\"modal fade\" id=\"staticBackdrop2\" data-bs-backdrop=\"static\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"staticBackdropLabel2\" aria-hidden=\"true\">\r\n                <div class=\"modal-dialog\">\r\n                    <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\" id=\"staticBackdropLabel\">Change Password</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <editUserPassword/>\r\n                    </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>         \r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport { db } from \"../firebase/config\"\r\nimport { doc, updateDoc } from \"firebase/firestore\"\r\n\r\nimport getCollection from \"../composables/getCollection\"\r\nimport getUserAuth from \"../composables/getUserAuth\"\r\nimport editUserPassword from \"../components/editUserPassword.vue\"\r\n\r\nexport default {\r\n    setup() {\r\n        const { userAuth } = getUserAuth()\r\n        const { documents: staff } = getCollection(\"staff\", [\"uid\", \"==\", userAuth.value.uid])\r\n        const handleUpdate = (staff) => {\r\n            const docRef = doc(db, \"staff\", staff.id)\r\n            updateDoc(docRef, {\r\n                fullname: staff.fullname,\r\n                pNumber: staff.pNumber,\r\n            });\r\n            alert(\"Profile updated\")\r\n        }\r\n        return {\r\n            staff,\r\n            userAuth,\r\n            handleUpdate\r\n        }\r\n    },\r\n    components: { editUserPassword }\r\n}\r\n</script>\r\n\r\n<style>\r\n</style>"],"sourceRoot":""},"metadata":{},"sourceType":"module"}