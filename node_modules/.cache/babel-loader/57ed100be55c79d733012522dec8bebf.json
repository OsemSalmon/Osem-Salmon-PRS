{"ast":null,"code":"import \"core-js/modules/es.function.name.js\";\nimport { auth } from '../firebase/config';\nimport { signOut } from '@firebase/auth';\nimport { useRouter, useRoute } from 'vue-router';\nimport { watchEffect } from 'vue';\nimport { doc, updateDoc } from \"firebase/firestore\";\nimport { db } from \"../firebase/config\";\nimport getUserAuth from '../composables/getUserAuth';\nimport getCollection from '../composables/getCollection';\nexport default {\n  setup: function setup() {\n    var _getUserAuth = getUserAuth(),\n        userAuth = _getUserAuth.userAuth;\n\n    var router = useRouter();\n    var route = useRoute(); // const { documents: staff } = getCollection(\"staff\",\n    // ['email', '==', userAuth.value.email])\n    // const handleUpdate = (staff) => {\n    //   const docRef = doc(db, \"staff\", staff.id)\n    //   updateDoc(docRef, {\n    //     uid: userAuth.value.uid\n    //   })\n    // }\n\n    var handleClick = function handleClick() {\n      signOut(auth);\n      router.push('/login');\n    };\n\n    watchEffect(function () {\n      if (!userAuth.value) {\n        if (route.name !== 'Login' && route.name !== 'Signup') {\n          router.push('/login');\n        }\n      }\n    });\n    return {\n      handleClick: handleClick,\n      userAuth: userAuth\n    };\n  }\n};","map":{"version":3,"sources":["D:\\Laragon\\www\\Osem-Salmon-PRS\\src\\components\\Navbar.vue"],"names":[],"mappings":";AA4CA,SAAS,IAAT,QAAqB,oBAArB;AACA,SAAS,OAAT,QAAwB,gBAAxB;AACA,SAAS,SAAT,EAAoB,QAApB,QAAoC,YAApC;AACA,SAAS,WAAT,QAA4B,KAA5B;AACA,SAAS,GAAT,EAAc,SAAd,QAA+B,oBAA/B;AACA,SAAS,EAAT,QAAmB,oBAAnB;AAEA,OAAO,WAAP,MAAwB,4BAAxB;AACA,OAAO,aAAP,MAA0B,8BAA1B;AAEA,eAAe;EACb,KADa,mBACL;IACN,mBAAqB,WAAW,EAAhC;IAAA,IAAQ,QAAR,gBAAQ,QAAR;;IACA,IAAM,MAAK,GAAI,SAAS,EAAxB;IACA,IAAM,KAAI,GAAI,QAAQ,EAAtB,CAHM,CAKN;IACA;IAEA;IACA;IACA;IACA;IACA;IACA;;IAEA,IAAM,WAAU,GAAI,SAAd,WAAc,GAAM;MACxB,OAAO,CAAC,IAAD,CAAP;MACA,MAAM,CAAC,IAAP,CAAY,QAAZ;IACF,CAHA;;IAKA,WAAW,CAAC,YAAM;MAChB,IAAG,CAAC,QAAQ,CAAC,KAAb,EAAoB;QAClB,IAAG,KAAK,CAAC,IAAN,KAAe,OAAf,IAA0B,KAAK,CAAC,IAAN,KAAe,QAA5C,EAAsD;UACpD,MAAM,CAAC,IAAP,CAAY,QAAZ;QACF;MACF;IACD,CANU,CAAX;IAQA,OAAO;MAAE,WAAW,EAAX,WAAF;MAAe,QAAO,EAAP;IAAf,CAAP;EACF;AA9Ba,CAAf","sourcesContent":["<template>\n    <nav class=\"navbar bg-light sticky-top\">\n      <div class=\"container-fluid\">\n        \n        <a class=\"navbar-brand material-icons\" href=\"#\">vaccines</a>\n        <span v-if=\"userAuth\">{{ userAuth.email }}</span>\n\n        \n\n        <ul class=\"nav\">\n\n          <form v-for=\"staff in staff\" :key=\"staff.id\" @submit.prevent=\"handleUpdate(staff)\">\n            <button class=\"btn\"><i class=\"bi bi-arrow-repeat\"></i></button>\n          </form>\n\n          <li class=\"nav-item ms-1 me-1\" v-if=\"userAuth\">\n            <router-link to=\"/\" class=\"btn btn-outline-dark\" aria-current=\"page\"><i class=\"bi bi-house-door\"></i> Home</router-link>\n          </li>\n\n          <li class=\"nav-item ms-1 me-1\" v-if=\"userAuth\">\n            <router-link to=\"/staffRecord\" class=\"btn btn-outline-dark\" aria-current=\"page\"><i class=\"bi bi-table\"></i> Staff</router-link>\n          </li>\n\n          <li class=\"nav-item ms-1 me-1\" v-if=\"userAuth\">\n            <router-link :to=\"`/userProfile/${userAuth.uid}`\" class=\"btn btn-outline-dark\" aria-current=\"page\"><i class=\"bi bi-person-lines-fill\"></i> Profile</router-link>\n          </li>\n\n          <li class=\"nav-item ms-1 me-1\" v-if=\"userAuth\">\n            <a class=\"btn btn-outline-danger\" @click=\"handleClick\"><i class=\"bi bi-box-arrow-in-right\"></i></a>\n          </li>\n          \n          <li class=\"nav-item ms-1 me-1\" v-if=\"!userAuth\">\n            <router-link to=\"/login\" class=\"nav-link\">Login</router-link>\n          </li>\n          <li class=\"nav-item ms-1 me-1\" v-if=\"!userAuth\">\n            <router-link to=\"/signup\" class=\"nav-link\">Sign Up</router-link>\n          </li>\n        </ul>  \n      </div>\n    </nav>\n\n</template>\n\n<script>\nimport { auth } from '../firebase/config'\nimport { signOut } from '@firebase/auth'\nimport { useRouter, useRoute } from 'vue-router'\nimport { watchEffect } from 'vue'\nimport { doc, updateDoc } from \"firebase/firestore\"\nimport { db } from \"../firebase/config\"\n\nimport getUserAuth from '../composables/getUserAuth'\nimport getCollection from '../composables/getCollection'\n\nexport default {\n  setup() {\n    const { userAuth } = getUserAuth()\n    const router = useRouter()\n    const route = useRoute()\n    \n    // const { documents: staff } = getCollection(\"staff\",\n    // ['email', '==', userAuth.value.email])\n\n    // const handleUpdate = (staff) => {\n    //   const docRef = doc(db, \"staff\", staff.id)\n    //   updateDoc(docRef, {\n    //     uid: userAuth.value.uid\n    //   })\n    // }\n\n    const handleClick = () => {\n      signOut(auth)\n      router.push('/login')\n    }\n\n    watchEffect(() => {\n      if(!userAuth.value) {\n        if(route.name !== 'Login' && route.name !== 'Signup') {\n          router.push('/login')\n        }\n      }\n    })\n\n    return { handleClick, userAuth }\n  }\n}\n</script>\n\n<style>\n</style>"],"sourceRoot":""},"metadata":{},"sourceType":"module"}