{"ast":null,"code":"import _asyncToGenerator from \"D:/Laragon/www/Osem-Salmon-PRS/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"regenerator-runtime/runtime.js\";\nimport { ref } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { db } from '../firebase/config';\nimport { addDoc, collection } from 'firebase/firestore';\nimport useSignup from '../composables/useSignup';\nexport default {\n  setup: function setup() {\n    var email = ref('');\n    var password = ref('');\n    var fullname = ref('');\n    var isAdmin = ref(false);\n    var isApproved = ref(false);\n    var pNumber = ref('');\n    var uid = ref('');\n    var router = useRouter();\n\n    var _useSignup = useSignup(),\n        signup = _useSignup.signup,\n        error = _useSignup.error;\n\n    var handleSubmit = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var colRef;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return signup(email.value, password.value);\n\n              case 2:\n                if (error.value) {\n                  _context.next = 7;\n                  break;\n                }\n\n                colRef = collection(db, 'staff');\n                _context.next = 6;\n                return addDoc(colRef, {\n                  email: email.value,\n                  fullname: fullname.value,\n                  isAdmin: isAdmin.value,\n                  isApproved: isApproved.value,\n                  pNumber: pNumber.value,\n                  uid: uid.value\n                });\n\n              case 6:\n                router.push('/');\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function handleSubmit() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    return {\n      email: email,\n      password: password,\n      handleSubmit: handleSubmit,\n      error: error,\n      fullname: fullname,\n      isAdmin: isAdmin,\n      isApproved: isApproved,\n      pNumber: pNumber\n    };\n  }\n};","map":{"version":3,"sources":["D:\\Laragon\\www\\Osem-Salmon-PRS\\src\\views\\Signup.vue"],"names":[],"mappings":";;AAwCA,SAAS,GAAT,QAAoB,KAApB;AACA,SAAS,SAAT,QAA0B,YAA1B;AACA,SAAS,EAAT,QAAmB,oBAAnB;AACA,SAAS,MAAT,EAAiB,UAAjB,QAAmC,oBAAnC;AAEA,OAAO,SAAP,MAAsB,0BAAtB;AAEA,eAAe;EACb,KADa,mBACL;IACN,IAAM,KAAI,GAAI,GAAG,CAAC,EAAD,CAAjB;IACA,IAAM,QAAO,GAAI,GAAG,CAAC,EAAD,CAApB;IACA,IAAM,QAAO,GAAI,GAAG,CAAC,EAAD,CAApB;IACA,IAAM,OAAM,GAAI,GAAG,CAAC,KAAD,CAAnB;IACA,IAAM,UAAS,GAAI,GAAG,CAAC,KAAD,CAAtB;IACA,IAAM,OAAM,GAAI,GAAG,CAAC,EAAD,CAAnB;IACA,IAAM,GAAE,GAAI,GAAG,CAAC,EAAD,CAAf;IAEA,IAAM,MAAK,GAAI,SAAS,EAAxB;;IAEA,iBAA0B,SAAS,EAAnC;IAAA,IAAQ,MAAR,cAAQ,MAAR;IAAA,IAAgB,KAAhB,cAAgB,KAAhB;;IAEA,IAAM,YAAW;MAAA,mEAAI;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACb,MAAM,CAAC,KAAK,CAAC,KAAP,EAAc,QAAQ,CAAC,KAAvB,CADO;;cAAA;gBAAA,IAGf,KAAK,CAAC,KAHS;kBAAA;kBAAA;gBAAA;;gBAIX,MAJW,GAIF,UAAU,CAAC,EAAD,EAAK,OAAL,CAJR;gBAAA;gBAAA,OAKX,MAAM,CAAC,MAAD,EAAS;kBACnB,KAAK,EAAE,KAAK,CAAC,KADM;kBAEnB,QAAQ,EAAE,QAAQ,CAAC,KAFA;kBAGnB,OAAO,EAAE,OAAO,CAAC,KAHE;kBAInB,UAAU,EAAE,UAAU,CAAC,KAJJ;kBAKnB,OAAO,EAAE,OAAO,CAAC,KALE;kBAMnB,GAAG,EAAE,GAAG,CAAC;gBANU,CAAT,CALK;;cAAA;gBAajB,MAAM,CAAC,IAAP,CAAY,GAAZ;;cAbiB;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CAAJ;;MAAA,gBAAX,YAAW;QAAA;MAAA;IAAA,GAAjB;;IAiBA,OAAO;MACP,KAAK,EAAL,KADO;MAEP,QAAQ,EAAR,QAFO;MAGP,YAAY,EAAZ,YAHO;MAIP,KAAK,EAAL,KAJO;MAKP,QAAQ,EAAR,QALO;MAMP,OAAO,EAAP,OANO;MAOP,UAAU,EAAV,UAPO;MAQP,OAAM,EAAN;IARO,CAAP;EAUF;AAzCa,CAAf","sourcesContent":["<template>\n  <form @submit.prevent=\"handleSubmit\">\n    <h2>Sign up</h2>\n\n    <label for=\"email\">Email:</label>\n    <input type=\"email\" name=\"email\" v-model=\"email\" required>\n\n    <label for=\"password\">Password:</label>\n    <input type=\"password\" name=\"password\" v-model=\"password\" required>\n\n    <button>Sign up</button> \n    <div v-if=\"error\">{{ error }}</div>\n  </form>\n\n  <div class=\"container\">\n    <div class=\"row\">\n      <div class=\"col-3\">col1</div>\n      <div class=\"col\">\n        <div class=\"form-floating mb-3\">\n          <input type=\"email\" class=\"form-control\" id=\"floatingInput\" placeholder=\"name@example.com\">\n          <label for=\"floatingInput\">Email Address</label>\n        </div>\n\n        <div class=\"form-floating mb-3\">\n          <input type=\"email\" class=\"form-control\" id=\"floatingInput\" placeholder=\"name@example.com\">\n          <label for=\"floatingInput\">Full Name</label>\n        </div>      \n        \n        <div class=\"form-floating mb-3\">\n          <input type=\"email\" class=\"form-control\" id=\"floatingInput\" placeholder=\"name@example.com\">\n          <label for=\"floatingInput\">Phone Number</label>\n        </div>  \n\n      </div>\n      <div class=\"col-3\">col3</div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { db } from '../firebase/config'\nimport { addDoc, collection } from 'firebase/firestore'\n\nimport useSignup from '../composables/useSignup'\n\nexport default {\n  setup() {\n    const email = ref('')\n    const password = ref('')\n    const fullname = ref('')\n    const isAdmin = ref(false)\n    const isApproved = ref(false)\n    const pNumber = ref('')\n    const uid = ref('')\n\n    const router = useRouter()\n\n    const { signup, error } = useSignup()\n\n    const handleSubmit = async () => {\n      await signup(email.value, password.value)\n      \n      if(!error.value) {\n        const colRef = collection(db, 'staff')\n        await addDoc(colRef, {\n          email: email.value,\n          fullname: fullname.value,\n          isAdmin: isAdmin.value,\n          isApproved: isApproved.value,\n          pNumber: pNumber.value,\n          uid: uid.value\n        })\n        router.push('/')\n      }\n    }\n\n    return { \n    email,\n    password, \n    handleSubmit, \n    error,\n    fullname,\n    isAdmin,\n    isApproved,\n    pNumber\n    }\n  }\n}\n</script>"],"sourceRoot":""},"metadata":{},"sourceType":"module"}